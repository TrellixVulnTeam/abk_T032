<main class="page-content">
    <!--breadcrumb-->
    <div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3">
        <div class="breadcrumb-title pe-3">Manage Question</div>
        <div class="ps-3">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-0 p-0">
                    <li class="breadcrumb-item"><a href="javascript:;"><i class="bi bi-view-list"></i></a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page"></li>
                </ol>
            </nav>
        </div>
    </div>
    <!--end breadcrumb-->
    <div class="row">
        <div class="col-md-3 col-sm-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <h5 class="card-title">List Question</h5>
                    </div>
                    <hr>
                    <div class="d-flex flex-wrap justify-content-start">
                        <div class="mx-1 mb-2">
                            <a href="" class="btn btn-primary">
                                <span>1</span>
                            </a>
                        </div>
                        <div class="mx-1 mb-2">
                            <a href="" class="btn btn-outline-primary">
                                <span>2</span>
                            </a>
                        </div>
                        <div class="mx-1 mb-2">
                            <a href="" class="btn btn-outline-primary">
                                <span>3</span>
                            </a>
                        </div>
                        <div class="mx-1 mb-2">
                            <a href="" class="btn btn-outline-primary">
                                <span>4</span>
                            </a>
                        </div>
                        <div class="mx-1 mb-2">
                            <a href="" class="btn btn-outline-success">
                                <span>+</span>
                            </a>
                        </div>
                        
                    </div>
                    <!-- <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <div class="card radius-10">
                                <div class="card-body text-center">
                                    <div class="widget-icon mx-auto mb-3 bg-light-primary text-primary">
                                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 512.001 512.001" style="enable-background:new 0 0 512.001 512.001;" xml:space="preserve" width="24" height="24"><path fill="#3461FF" d="M481.33,412.242C501.437,384.866,512,353.054,512,319.525c0-53.672-27.834-103.502-74.792-134.598  c-4.331-47.819-26.659-92.166-63.991-126.335C331.936,20.809,277.167,0,219,0S106.065,20.809,64.783,58.593  C23.007,96.828,0,147.806,0,202.136c0,41.788,13.471,81.406,39.079,115.304L1.458,410.504c-3.051,7.547-1.224,16.19,4.621,21.855  c3.81,3.693,8.828,5.642,13.926,5.642c2.723-0.001,5.469-0.557,8.063-1.7l107.301-47.3c13.471,5.149,27.349,9.001,41.547,11.551  c14.543,23.918,35.287,44.173,60.505,58.917c28.154,16.459,60.661,25.254,94.098,25.507c0.491,0.036,0.981,0.075,1.482,0.075  c23.117,0,45.515-3.993,66.703-11.88l84.229,37.13c2.594,1.144,5.34,1.7,8.063,1.7c5.097,0,10.117-1.948,13.926-5.642  c5.845-5.666,7.672-14.309,4.621-21.855L481.33,412.242z M439.889,416.457l15.109,37.375l-46.837-20.646  c-5.063-2.232-10.825-2.267-15.916-0.095c-18.357,7.832-38.014,11.846-58.435,11.95C333.54,445.03,333.274,445,333,445  c-39.414,0-76.65-15.402-102.664-41.023c32.983-1.58,65.313-10.003,94.137-24.641c9.849-5.002,13.777-17.04,8.775-26.889  c-5.001-9.848-17.04-13.775-26.889-8.775c-26.534,13.477-56.743,20.6-87.359,20.6c-26.604,0-52.217-5.172-76.124-15.373  c-5.089-2.172-10.853-2.139-15.916,0.095l-69.958,30.839l23.554-58.266c2.793-6.909,1.514-14.799-3.321-20.47  C52.876,272.519,40,238.299,40,202.136C40,112.733,120.299,40,219,40s179,72.733,179,162.136c0,28.876-8.489,57.224-24.552,81.979  c-6.012,9.266-3.374,21.651,5.893,27.663c9.264,6.014,21.65,3.374,27.664-5.892c14.254-21.969,23.777-46.225,28.181-71.417  C458.615,257.413,472,287.634,472,319.525c0,27.926-9.955,54.366-28.79,76.461C438.375,401.658,437.096,409.548,439.889,416.457z   M238,305c0,11.046-8.954,20-20,20l0,0c-11.046,0-20-8.954-20-20s8.954-20,20-20l0,0C229.046,285,238,293.954,238,305z   M293.983,155.152c0.012,0.278,0.018,0.556,0.018,0.837c0.007,30.107-17.882,57.201-45.573,69.022  c-5.73,2.447-9.434,8.218-9.434,14.701V241c0,11.046-8.954,20-20,20s-20-8.954-20-20v-1.287c0-22.531,13.239-42.741,33.729-51.488  c12.753-5.445,21.053-17.826,21.273-31.653c-0.005-0.192-0.008-0.385-0.008-0.578c0-19.295-15.698-34.993-34.994-34.993  C199.699,121,184,136.698,184,155.993c0,11.046-8.954,20-20,20s-20-8.954-20-20C144,114.642,177.642,81,218.994,81  C260.065,81,293.532,114.187,293.983,155.152z"/></svg>
                                    </div>
                                    <h3>3</h3>
                                    <p class="mb-0">Question</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <div class="card radius-10">
                                <div class="card-body text-center">
                                    <div class="widget-icon mx-auto mb-3 bg-light-success text-success">
                                        <svg id="Capa_1" height="24" viewBox="0 0 509.815 509.815" width="24" xmlns="http://www.w3.org/2000/svg"><path fill="#12bf24" d="m165.029 399.026c8.003 2.128 16.222-2.636 18.351-10.643l15.896-59.795 52.299-5.041 19.987 65.723c2.411 7.929 10.792 12.397 18.715 9.987 7.926-2.41 12.397-10.79 9.987-18.715l-18.225-59.931 3.72-.359c8.246-.795 14.287-8.124 13.492-16.37-.794-8.246-8.125-14.285-16.37-13.492l-9.746.939-35.366-116.298c-4.365-14.354-24.972-14.069-28.848.51l-33.28 125.185-26.915 2.594c-8.246.795-14.287 8.124-13.492 16.37.796 8.26 8.143 14.289 16.37 13.492l15.815-1.524-13.031 49.017c-2.13 8.006 2.635 16.222 10.641 18.351zm59.356-164.889 18.285 60.129-35.172 3.39z"/><path fill="#12bf24" d="m333.839 211.136c8.284 0 15-6.716 15-15v-32.22l16.619.962c8.269.478 15.363-5.837 15.842-14.108s-5.838-15.363-14.108-15.842l-18.353-1.062v-18.46c0-8.284-6.716-15-15-15s-15 6.716-15 15v16.724l-16.619-.962c-8.268-.48-15.363 5.838-15.842 14.108s5.838 15.363 14.108 15.842l18.353 1.062v33.957c0 8.284 6.716 14.999 15 14.999z"/><path fill="#12bf24" d="m418.667 70.653c-5.675-6.033-15.168-6.323-21.203-.648-6.034 5.677-6.324 15.169-.648 21.204 68.585 72.908 81.882 206.102 29.641 296.912-45.128 78.446-128.723 108.01-235.38 83.244-109.134-25.34-151.646-139.593-136.239-234.229 17.461-107.246 114.071-225.249 328.865-204.86 8.254.776 15.568-5.269 16.35-13.516.783-8.247-5.268-15.567-13.515-16.35-212.59-20.181-338.368 88.991-361.31 229.905-19.375 119.012 40.444 240.73 159.063 268.272 111.655 25.926 212.998-1.604 268.169-97.507 58.099-100.991 44.269-249.446-33.793-332.427z"/></svg>
                                    </div>
                                    <h3>75</h3>
                                    <p class="mb-0">Grade</p>
                                </div>
                            </div>
                        </div>
                    </div> -->
                    <div class="row">
                        <div class="col">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked">
                                <label class="form-check-label" for="flexSwitchCheckChecked">Random Question</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-9 col-sm-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <h5 class="card-title">Question 1</h5>
                        </div>
                        <div class="col-md-6 col-sm-12" style="text-align: right;">
                            <a href="#" id="btn-save" class="btn btn-success btn-sm"><i class="bi bi-save"></i> Save</a>
                        </div>
                    </div>
                    
                    <hr>
                    <form id="formSubmit" action="<?= site_url('admin/question/store')?>" method="post">
                        <ul class="list-group" id="demo1" >
                            <li class="list-group-item" >
                                <div class="form-group mb-3">
                                    <label class="form-label" for="">Type</label>
                                    <select name="TIPE" id="select_type" class="form-select" style="width: 30%;">
                                        <option value="1">Essay</option>
                                        <option value="2">Multiple Choice</option>
                                        <option value="3">Missing Sentence</option>
                                    </select>
                                </div>
                                <div id="question_content">
                                    <div class="type_essay">
                                        <div class="form-group mb-3">
                                            <label class="form-label" for="">Question <span class="text-danger">*</span></label>
                                            <textarea id="ckEssay"></textarea>
                                        </div>
                                    </div>
                                    <div class="type_multiple" hidden>
                                        <div class="form-group mb-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label" for="">Question <span class="text-danger">*</span></label>
                                                <textarea id="ckMulti">
                                                </textarea>
                                            </div>
                                            <label class="form-label" for="">Response <span class="text-danger">*</span></label>
                                            <div class="type_multiple_content" style="margin-bottom: -10px;">
                                                <div class="input-group mb-3 type_multiple_input" id="type_multiple_content_1">
                                                    <input class="form-control" type="text">
                                                    <div class="input-group-text">
                                                        <input class="form-check-input" type="radio" value="" name="formMulti[]" required><a onclick="deleteResponse(1)" style="margin-left: 5px;margin-top: 2px;font-size: 13px;cursor: pointer;" class="text-danger type_multiple_delete"><i class="bi bi-x-lg"></i></a>
                                                    </div>
                                                </div>
                                                <div class="input-group mb-3 type_multiple_input" id="type_multiple_content_2">
                                                    <input class="form-control" type="text">
                                                    <div class="input-group-text">
                                                        <input class="form-check-input" type="radio" value="" name="formMulti[]" required><a onclick="deleteResponse(2)" style="margin-left: 5px;margin-top: 2px;font-size: 13px;cursor: pointer;" class="text-danger type_multiple_delete"><i class="bi bi-x-lg"></i></a>
                                                    </div>
                                                </div>
                                                <div class="input-group mb-3 type_multiple_input" id="type_multiple_content_3">
                                                    <input class="form-control" type="text">
                                                    <div class="input-group-text">
                                                        <input class="form-check-input" type="radio" value="" name="formMulti[]" required><a onclick="deleteResponse(3)" style="margin-left: 5px;margin-top: 2px;font-size: 13px;cursor: pointer;" class="text-danger type_multiple_delete"><i class="bi bi-x-lg"></i></a>
                                                    </div>
                                                </div>
                                            </div>
                                            <span id="type_multiple_add" class="text-primary" style="font-size: 10px;margin-top: -20px;cursor: pointer;">+ Add new response</span>
                                        </div>
                                    </div>
                                    <div class="type_missing" hidden>
                                        <div class="form-group mb-3">
                                            <label class="form-label" for="">Question <span class="text-danger">*</span></label>
                                            <textarea id="ckMissing"></textarea>
                                            <span class="text-secondary" style="font-size: 10px;">Use '_' underscores to specify where you would like a blank to appear in the text below</span>
                                        </div>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label class="form-label" for="">Grading (points) <span class="text-danger">*</span></label>
                                        <input class="form-control" style="width: 30%;" type="number"> 
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>
<script src="<?= site_url()?>/assets/adm/js/sortable.min.js"></script>
<script>
    let typeMulti = 4
    $(document).ready(function(){
        Sortable.create(demo1, {
            animation: 100,
            group: 'list-1',
            // draggable: '.list-group-item',
            handle: '.handle',
            sort: true,
            filter: '.sortable-disabled',
            chosenClass: 'active'
        });
        ClassicEditor
            .create( document.querySelector( '#ckEssay' ) )
            .catch( error => {
                console.error( error );
            } );
        ClassicEditor
            .create( document.querySelector( '#ckMulti' ) )
            .catch( error => {
                console.error( error );
            } );
        ClassicEditor
            .create( document.querySelector( '#ckMissing' ) )
            .catch( error => {
                console.error( error );
            } );
    })
    let dataItem = 2;
    $("#select_type").change(function(){
        const val = $(this).val()
        if(val == "1"){
            $('.type_multiple').attr('hidden', true);
            $('.type_missing').attr('hidden', true);
            $('.type_essay').attr('hidden', false);
        }else if(val == "2"){
            $('.type_missing').attr('hidden', true);
            $('.type_essay').attr('hidden', true);
            $('.type_multiple').attr('hidden', false);
        }else if(val == "3"){
            $('.type_multiple').attr('hidden', true);
            $('.type_essay').attr('hidden', true);
            $('.type_missing').attr('hidden', false);
        }
    })
    $('#type_multiple_add').click(function(){
        const html = `
            <div class="input-group mb-3 type_multiple_input" id="type_multiple_content_${typeMulti}">
                <input class="form-control" type="text">
                <div class="input-group-text">
                    <input class="form-check-input" type="radio" value="" name="formMulti[]" required><a style="margin-left: 5px;margin-top: 2px;font-size: 13px;cursor: pointer;" onclick="deleteResponse(${typeMulti})" class="text-danger type_multiple_delete"><i class="bi bi-x-lg"></i></a>
                </div>
            </div>
        `
        typeMulti++
        $('.type_multiple_delete').attr('hidden', false)
        $('.type_multiple_content').append(html)
    })
    $('#btn-save').click(function(){
        $('#formSubmit').submit()
    })
    const deleteResponse = (id) => {
        $('#type_multiple_content_'+id).remove()
        
        const length = $('.type_multiple_input').length
        length == 2 && $('.type_multiple_delete').attr('hidden', true)
    }
</script>